-- MySQL dump 10.13  Distrib 8.0.28, for Win64 (x86_64)
--
-- Host: 127.0.0.1    Database: vietcoin
-- ------------------------------------------------------
-- Server version	8.0.21

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!50503 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Table structure for table `wallets_log`
--

DROP TABLE IF EXISTS `wallets_log`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `wallets_log` (
  `id` int NOT NULL AUTO_INCREMENT,
  `user_id` int NOT NULL COMMENT '유저 식별자 (FK)',
  `category` enum('funding','quant','referral') NOT NULL COMMENT '로그 구분',
  `log_date` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '기록 일시',
  `direction` enum('in','out') NOT NULL COMMENT '입출금 구분',
  `amount` decimal(18,6) NOT NULL COMMENT '금액',
  `balance_after` decimal(18,6) DEFAULT NULL COMMENT '처리 후 잔액',
  `reference_type` varchar(50) DEFAULT NULL COMMENT '참조 테이블/트랜잭션 타입 (예: funding_investment)',
  `reference_id` varchar(36) NOT NULL,
  `description` varchar(255) DEFAULT NULL COMMENT '비고 및 설명',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  KEY `idx_user_date` (`user_id`,`log_date`),
  CONSTRAINT `wallets_log_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=76 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='지갑 입출금 로그';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `wallets_log`
--

LOCK TABLES `wallets_log` WRITE;
/*!40000 ALTER TABLE `wallets_log` DISABLE KEYS */;
INSERT INTO `wallets_log` VALUES (1,4,'funding','2025-05-09 10:43:09','in',208.000000,9509.790000,'funding_investment','8','일일 수익 적립 (누락 보정 2일)','2025-05-09 10:43:09','2025-05-09 10:43:09'),(2,4,'funding','2025-05-09 10:45:32','in',1300.000000,10809.790000,'funding_investment','8','만료 프로젝트 원금 반환','2025-05-09 10:45:32','2025-05-09 10:45:32'),(3,4,'funding','2025-05-09 12:23:49','in',177.760000,10987.550000,'funding_investment','9','프로젝트 초기 수익 지급','2025-05-09 12:23:49','2025-05-09 12:23:49'),(4,4,'funding','2025-05-09 12:23:49','out',2222.000000,8765.550000,'funding_investment','9','프로젝트 투자 참여','2025-05-09 12:23:49','2025-05-09 12:23:49'),(5,4,'funding','2025-05-10 15:37:29','in',177.760000,8943.310000,'funding_investment','9','일일 수익 적립 (누락 보정 1일)','2025-05-10 15:37:29','2025-05-10 15:37:29'),(6,24,'quant','2025-05-11 01:49:56','in',22.000000,22.000000,'admin_deposit','13','관리자 수동 입금','2025-05-11 01:49:56','2025-05-11 01:49:56'),(7,4,'funding','2025-05-11 19:38:02','in',177.760000,9121.070000,'funding_investment','10','프로젝트 초기 수익 지급','2025-05-11 19:38:02','2025-05-11 19:38:02'),(8,4,'funding','2025-05-11 19:38:02','out',2222.000000,6899.070000,'funding_investment','10','프로젝트 투자 참여','2025-05-11 19:38:02','2025-05-11 19:38:02'),(9,4,'quant','2025-05-11 19:38:20','out',61.700000,10334.000633,'token_purchase','0e9252ba-2e54-11f0-a0c9-00d861e5dfb2','Purchased 1234 Phase 1 Pre‑Sale','2025-05-11 19:38:20','2025-05-11 19:38:20'),(10,4,'funding','2025-05-12 08:45:42','in',2222.000000,9121.070000,'funding_investment','9','만료 프로젝트 원금 반환','2025-05-12 08:45:42','2025-05-12 08:45:42'),(11,4,'funding','2025-05-12 08:45:42','in',2222.000000,11343.070000,'funding_investment','10','만료 프로젝트 원금 반환','2025-05-12 08:45:42','2025-05-12 08:45:42'),(12,4,'quant','2025-05-12 08:54:22','out',61.700000,10210.600633,'token_purchase','42da737d-2ec3-11f0-a0c9-00d861e5dfb2','Purchased 1234 Phase 1 Pre‑Sale','2025-05-12 08:54:22','2025-05-12 08:54:22'),(13,4,'quant','2025-05-12 09:28:11','out',61.700000,10148.900633,'token_purchase','fc80daf1-2ec7-11f0-a0c9-00d861e5dfb2','Purchased 1234 Phase 1 Pre‑Sale','2025-05-12 09:28:11','2025-05-12 09:28:11'),(14,4,'quant','2025-05-12 09:39:49','out',5000.000000,5148.900633,'token_purchase','9c3c3984-2ec9-11f0-a0c9-00d861e5dfb2','Purchased 100000 Phase 1 Pre‑Sale','2025-05-12 09:39:49','2025-05-12 09:39:49'),(15,4,'quant','2025-05-12 09:51:28','out',61.150000,5087.750633,'token_purchase','3ceb0e98-2ecb-11f0-a0c9-00d861e5dfb2','Purchased 1223 Phase 1 Pre‑Sale','2025-05-12 09:51:28','2025-05-12 09:51:28'),(16,4,'quant','2025-05-12 09:56:15','out',50.000000,5037.750633,'token_purchase','e7d198b3-2ecb-11f0-a0c9-00d861e5dfb2','Purchased 1000 Phase 1 Pre‑Sale','2025-05-12 09:56:15','2025-05-12 09:56:15'),(17,4,'quant','2025-05-13 02:22:21','in',123.000000,5160.750633,'token_exchange','exchange','f4aebc10-1288-466b-824d-0cab7a75352d','2025-05-13 02:22:21','2025-05-13 02:22:21'),(18,4,'quant','2025-05-13 15:35:25','out',1785.560000,3375.190633,'token_purchase','73fb6685-2fc4-11f0-a0c9-00d861e5dfb2','Purchased 25508 Phase 2 Pre‑Sale','2025-05-13 15:35:25','2025-05-13 15:35:25'),(19,4,'funding','2025-05-13 16:21:13','out',123.000000,11220.070000,'withdrawal_request','1','Withdrawal request 123 (USDT), fee 0','2025-05-13 16:21:13','2025-05-13 16:21:13'),(20,4,'funding','2025-05-13 17:48:43','out',123.000000,11247.070000,'withdrawal','1','Withdrawal approved','2025-05-13 17:48:43','2025-05-13 17:48:43'),(21,4,'funding','2025-05-13 18:14:07','out',124.230000,11122.840000,'withdrawal_request','3','Withdrawal request 123 (USDT), fee 1.23','2025-05-13 18:14:07','2025-05-13 18:14:07'),(22,4,'funding','2025-05-13 18:14:31','out',125.240000,10997.600000,'withdrawal_request','4','Withdrawal request 124 (USDT), fee 1.24','2025-05-13 18:14:31','2025-05-13 18:14:31'),(23,4,'funding','2025-05-13 18:14:40','in',124.000000,11121.600000,'withdrawal_reject','4','Withdrawal rejected','2025-05-13 18:14:40','2025-05-13 18:14:40'),(24,4,'quant','2025-05-14 16:37:34','out',35.000000,3340.228863,'token_purchase','bd224ef5-30e1-11f0-b211-0affc8a0b32f','Purchased 500 Phase 2 Pre‑Sale','2025-05-14 16:37:34','2025-05-14 16:37:34'),(25,4,'quant','2025-05-14 17:11:23','in',22.000000,3362.228863,'token_exchange','exchange','f8818e1a-b2c6-44be-ab50-e524b4542596','2025-05-14 17:11:23','2025-05-14 17:11:23'),(26,4,'quant','2025-05-14 17:13:06','in',22.000000,3384.228863,'token_exchange','exchange','833f46d3-886c-4c8d-af2b-3c62e4ad23f5','2025-05-14 17:13:06','2025-05-14 17:13:06'),(27,4,'funding','2025-05-14 17:16:09','in',61.700000,11183.300000,'funding_investment','11','프로젝트 초기 수익 지급','2025-05-14 17:16:09','2025-05-14 17:16:09'),(28,4,'funding','2025-05-14 17:16:09','out',1234.000000,9949.300000,'funding_investment','11','프로젝트 투자 참여','2025-05-14 17:16:09','2025-05-14 17:16:09'),(29,4,'funding','2025-05-14 17:16:18','in',50.000000,9999.300000,'funding_investment','12','프로젝트 초기 수익 지급','2025-05-14 17:16:18','2025-05-14 17:16:18'),(30,4,'funding','2025-05-14 17:16:18','out',1000.000000,8999.300000,'funding_investment','12','프로젝트 투자 참여','2025-05-14 17:16:18','2025-05-14 17:16:18'),(31,22,'quant','2025-05-15 03:54:54','out',206.430000,8799.418598,'token_purchase','5c2366be-3140-11f0-b211-0affc8a0b32f','Purchased 2949 Phase 2 Pre‑Sale','2025-05-15 03:54:54','2025-05-15 03:54:54'),(32,4,'quant','2025-05-15 15:18:23','out',35.000000,3365.011212,'token_purchase','d79f8179-319f-11f0-b211-0affc8a0b32f','Purchased 500 Phase 2 Pre‑Sale','2025-05-15 15:18:23','2025-05-15 15:18:23'),(33,4,'funding','2025-05-15 17:50:31','in',61.700000,9058.680000,'funding_investment','11','일일 수익 적립 (누락 보정 1일)','2025-05-15 17:50:31','2025-05-15 17:50:31'),(34,4,'funding','2025-05-15 17:50:31','in',50.000000,9108.680000,'funding_investment','12','일일 수익 적립 (누락 보정 1일)','2025-05-15 17:50:31','2025-05-15 17:50:31'),(35,4,'quant','2025-05-16 08:26:51','out',168.000000,3204.892239,'token_purchase','848bfff1-322f-11f0-b211-0affc8a0b32f','Purchased 2400 Phase 2 Pre‑Sale','2025-05-16 08:26:51','2025-05-16 08:26:51'),(36,4,'funding','2025-05-17 00:00:00','in',61.700000,9170.380000,'funding_investment','11','일일 수익 적립 (누락 보정 1일)','2025-05-17 00:00:00','2025-05-17 00:00:00'),(37,4,'funding','2025-05-17 00:00:01','in',50.000000,9220.380000,'funding_investment','12','일일 수익 적립 (누락 보정 1일)','2025-05-17 00:00:01','2025-05-17 00:00:01'),(38,4,'funding','2025-05-18 00:00:00','in',61.700000,9282.080000,'funding_investment','11','일일 수익 적립 (누락 보정 1일)','2025-05-18 00:00:00','2025-05-18 00:00:00'),(39,4,'funding','2025-05-18 00:00:00','in',50.000000,9332.080000,'funding_investment','12','일일 수익 적립 (누락 보정 1일)','2025-05-18 00:00:00','2025-05-18 00:00:00'),(40,4,'funding','2025-05-19 00:00:00','in',61.700000,9393.780000,'funding_investment','11','일일 수익 적립 (누락 보정 1일)','2025-05-19 00:00:00','2025-05-19 00:00:00'),(41,4,'funding','2025-05-19 00:00:00','in',50.000000,9443.780000,'funding_investment','12','일일 수익 적립 (누락 보정 1일)','2025-05-19 00:00:00','2025-05-19 00:00:00'),(42,4,'funding','2025-05-19 06:19:53','in',50.000000,9493.780000,'funding_investment','13','프로젝트 초기 수익 지급','2025-05-19 06:19:53','2025-05-19 06:19:53'),(43,4,'funding','2025-05-19 06:19:53','out',1000.000000,8493.780000,'funding_investment','13','프로젝트 투자 참여','2025-05-19 06:19:53','2025-05-19 06:19:53'),(45,4,'funding','2025-05-20 00:00:00','in',61.700000,8565.480000,'funding_investment','11','일일 수익 적립 (누락 보정 1일)','2025-05-20 00:00:00','2025-05-20 00:00:00'),(46,4,'funding','2025-05-20 00:00:00','in',50.000000,8615.480000,'funding_investment','12','일일 수익 적립 (누락 보정 1일)','2025-05-20 00:00:00','2025-05-20 00:00:00'),(47,4,'funding','2025-05-20 01:00:00','in',1234.000000,9849.480000,'funding_investment','11','만료 프로젝트 원금 반환','2025-05-20 01:00:00','2025-05-20 01:00:00'),(48,4,'funding','2025-05-20 01:00:00','in',1000.000000,10849.480000,'funding_investment','12','만료 프로젝트 원금 반환','2025-05-20 01:00:00','2025-05-20 01:00:00'),(49,4,'funding','2025-05-20 01:00:00','in',1000.000000,11849.480000,'funding_investment','13','만료 프로젝트 원금 반환','2025-05-20 01:00:00','2025-05-20 01:00:00'),(50,4,'referral','2025-05-21 10:22:35','in',5.000000,3266.048598,'invite_rewards','4','Invite reward claimed','2025-05-21 10:22:35','2025-05-21 10:22:35'),(51,4,'quant','2025-05-21 10:56:54','out',56.200000,3226.010880,'token_purchase','defe72b0-35e6-11f0-a9b7-38d275d3c45c','Purchased 281 일베마스크','2025-05-21 10:56:54','2025-05-21 10:56:54'),(52,4,'quant','2025-05-21 11:02:02','out',40.000000,3186.010880,'token_purchase','967b2cda-35e7-11f0-a9b7-38d275d3c45c','Purchased 200 일베마스크','2025-05-21 11:02:02','2025-05-21 11:02:02'),(53,4,'quant','2025-05-21 11:02:10','out',49.800000,3136.210880,'token_purchase','9b18a13c-35e7-11f0-a9b7-38d275d3c45c','Purchased 249 일베마스크','2025-05-21 11:02:10','2025-05-21 11:02:10'),(54,4,'quant','2025-05-21 11:03:34','out',40.000000,3096.210880,'token_purchase','cd25a224-35e7-11f0-a9b7-38d275d3c45c','Purchased 200 일베마스크','2025-05-21 11:03:34','2025-05-21 11:03:34'),(55,4,'quant','2025-05-21 11:07:48','out',40.000000,3056.210880,'token_purchase','645a4604-35e8-11f0-a9b7-38d275d3c45c','Purchased 200 일베마스크','2025-05-21 11:07:48','2025-05-21 11:07:48'),(56,4,'funding','2025-05-21 11:59:10','in',22.000000,3078.210880,'join_rewards','3','Join bonus claimed','2025-05-21 11:59:10','2025-05-21 11:59:10'),(57,4,'referral','2025-05-21 12:20:32','in',221.000000,3299.210880,'invite_rewards','7','Invite reward claimed','2025-05-21 12:20:32','2025-05-21 12:20:32'),(58,4,'funding','2025-05-21 12:33:33','in',50.000000,11890.480000,'funding_investment','14','프로젝트 초기 수익 지급','2025-05-21 12:33:33','2025-05-21 12:33:33'),(59,4,'funding','2025-05-21 12:33:33','out',1000.000000,10890.480000,'funding_investment','14','프로젝트 투자 참여','2025-05-21 12:33:33','2025-05-21 12:33:33'),(60,4,'funding','2025-05-21 12:35:35','in',50.000000,10940.480000,'funding_investment','15','프로젝트 초기 수익 지급','2025-05-21 12:35:35','2025-05-21 12:35:35'),(61,4,'funding','2025-05-21 12:35:35','out',1000.000000,9940.480000,'funding_investment','15','프로젝트 투자 참여','2025-05-21 12:35:35','2025-05-21 12:35:35'),(62,4,'funding','2025-05-21 12:35:40','in',50.000000,9990.480000,'funding_investment','16','프로젝트 초기 수익 지급','2025-05-21 12:35:40','2025-05-21 12:35:40'),(63,4,'funding','2025-05-21 12:35:40','out',1000.000000,8990.480000,'funding_investment','16','프로젝트 투자 참여','2025-05-21 12:35:40','2025-05-21 12:35:40'),(64,4,'funding','2025-05-21 12:35:52','in',50.000000,9040.480000,'funding_investment','17','프로젝트 초기 수익 지급','2025-05-21 12:35:52','2025-05-21 12:35:52'),(65,4,'funding','2025-05-21 12:35:52','out',1000.000000,8040.480000,'funding_investment','17','프로젝트 투자 참여','2025-05-21 12:35:52','2025-05-21 12:35:52'),(66,4,'funding','2025-05-21 12:38:21','in',50.000000,8090.480000,'funding_investment','18','프로젝트 초기 수익 지급','2025-05-21 12:38:21','2025-05-21 12:38:21'),(67,4,'funding','2025-05-21 12:38:21','out',1000.000000,7090.480000,'funding_investment','18','프로젝트 투자 참여','2025-05-21 12:38:21','2025-05-21 12:38:21'),(68,4,'funding','2025-05-21 12:39:58','in',50.000000,7140.480000,'funding_investment','19','프로젝트 초기 수익 지급','2025-05-21 12:39:58','2025-05-21 12:39:58'),(69,4,'funding','2025-05-21 12:39:58','out',1000.000000,6140.480000,'funding_investment','19','프로젝트 투자 참여','2025-05-21 12:39:58','2025-05-21 12:39:58'),(70,4,'funding','2025-05-21 13:31:44','in',2.000000,6142.480000,'funding_investment','20','프로젝트 초기 수익 지급','2025-05-21 13:31:44','2025-05-21 13:31:44'),(71,4,'funding','2025-05-21 13:31:44','out',100.000000,6042.480000,'funding_investment','20','프로젝트 투자 참여','2025-05-21 13:31:44','2025-05-21 13:31:44'),(72,4,'funding','2025-05-21 13:34:02','in',100.000000,6142.480000,'funding_refund','14','프로젝트취소로인한반환','2025-05-21 13:34:02','2025-05-21 13:34:02'),(73,4,'quant','2025-05-21 13:51:51','out',12.120000,3287.090880,'withdrawal_request','6','Withdrawal request 12 (USDT), fee 0.12','2025-05-21 13:51:51','2025-05-21 13:51:51'),(74,4,'quant','2025-05-21 13:53:02','out',123.000000,3287.090880,'withdrawal','3','Withdrawal approved','2025-05-21 13:53:02','2025-05-21 13:53:02'),(75,4,'quant','2025-05-21 13:53:04','out',12.000000,3287.090880,'withdrawal','6','Withdrawal approved','2025-05-21 13:53:04','2025-05-21 13:53:04');
/*!40000 ALTER TABLE `wallets_log` ENABLE KEYS */;
UNLOCK TABLES;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2025-07-20 23:43:16
